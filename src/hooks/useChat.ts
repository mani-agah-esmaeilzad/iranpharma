import { useState } from "react";

interface Message {
  id: string;
  text: string;
  isBot: boolean;
  timestamp: Date;
}

const botResponses = {
  "لیست غرفه‌های موجود در نمایشگاه را با اطلاعات کامل به من نشان دهید.": 
    "غرفه‌های موجود در نمایشگاه:\n\n🏢 **شرکت داروسازی اکتوور** - غرفه A1\n• محصولات: داروهای بیوتکنولوژی\n• تخصص: تولید انسولین و واکسن\n\n🏢 **گروه داروسازی سبحان** - غرفه B2\n• محصولات: مکمل‌های غذایی\n• تخصص: تحقیق و توسعه\n\n🏢 **داروپخش ایران** - غرفه C3\n• خدمات: توزیع و لجستیک دارو\n• تخصص: زنجیره سرد\n\n🏢 **فارمد تجهیزات** - غرفه D4\n• محصولات: تجهیزات پزشکی\n• تخصص: دستگاه‌های تشخیصی",
    
  "ساعات کاری و زمان‌بندی نمایشگاه چگونه است؟":
    "📅 **برنامه زمانی نمایشگاه:**\n\n🕘 **ساعات بازدید عمومی:**\n• شنبه تا چهارشنبه: ۹:۰۰ الی ۱۸:۰۰\n• پنج‌شنبه: ۹:۰۰ الی ۲۰:۰۰\n\n🎯 **ساعات ویژه متخصصان:**\n• روزهای زوج: ۸:۰۰ الی ۹:۰۰\n\n⏰ **رویدادهای ویژه:**\n• سمینارها: ۱۰:۰۰ و ۱۵:۰۰\n• میزگردها: ۱۳:۰۰",
    
  "کدام شرکت‌ها در نمایشگاه حضور دارند و چه محصولاتی ارائه می‌دهند؟":
    "🏭 **شرکت‌های حاضر:**\n\n**بخش تولید:**\n• کیمیا دارو - آنتی‌بیوتیک‌ها\n• زهراوی - تجهیزات جراحی\n• پارس دارو - داروهای قلبی عروقی\n\n**بخش فناوری:**\n• ایران تک فارما - سامانه‌های هوشمند\n• دیجی فارما - پلتفرم دیجیتال\n\n**بخش توزیع:**\n• داروپخش رازی\n• شبکه توزیع پارسیان",
    
  "چه رویدادها و سمینارهای ویژه‌ای در نمایشگاه برگزار می‌شود؟":
    "🎓 **رویدادهای ویژه:**\n\n**امروز:**\n• ۱۰:۰۰ - سمینار \"نوآوری در داروسازی\"\n• ۱۳:۰۰ - میزگرد \"زنجیره تأمین پایدار\"\n• ۱۵:۰۰ - کارگاه \"فناوری‌های نوین\"\n\n**فردا:**\n• ۹:۰۰ - همایش \"تاب‌آوری در بحران\"\n• ۱۱:۰۰ - نشست \"استانداردهای بین‌المللی\"\n• ۱۶:۰۰ - ارائه محصولات جدید\n\n📍 **مکان:** سالن کنفرانس طبقه دوم",
    
  "برای دریافت اطلاعات بیشتر و راهنمایی با چه کسی تماس بگیرم؟":
    "📞 **اطلاعات تماس:**\n\n**مرکز اطلاع‌رسانی:**\n• تلفن: ۰۲۱-۸۸۷۷۶۶۵۵\n• داخلی: ۱۲۳\n\n**میز راهنمایی:**\n• طبقه همکف - ورودی اصلی\n• ساعت کاری: ۸:۰۰ الی ۱۹:۰۰\n\n**پشتیبانی فنی:**\n• واتساپ: ۰۹۱۲۱۲۳۴۵۶۷\n• ایمیل: info@iranpharma-expo.ir\n\n🗺️ **راهنمای نمایشگاه:** در میز پذیرش موجود است"
};

export const useChat = () => {
  const [messages, setMessages] = useState<Message[]>([
    {
      id: "1",
      text: "سلام! به دستیار هوشمند نمایشگاه ایران فارما خوش آمدید. من اینجا هستم تا در مورد غرفه‌ها، شرکت‌ها و برنامه‌های نمایشگاه به شما کمک کنم. چه سؤالی دارید؟",
      isBot: true,
      timestamp: new Date()
    }
  ]);
  
  const [isTyping, setIsTyping] = useState(false);

  const sendMessage = async (text: string) => {
    // Add user message
    const userMessage: Message = {
      id: Date.now().toString(),
      text,
      isBot: false,
      timestamp: new Date()
    };

    setMessages(prev => [...prev, userMessage]);
    setIsTyping(true);

    // simulate typing delay
    await new Promise(resolve => setTimeout(resolve, 1500));

    // Get bot response
    const botResponse = botResponses[text as keyof typeof botResponses] || 
      "متأسفم، اطلاعات کاملی در این زمینه ندارم. لطفاً با میز راهنمایی در ورودی نمایشگاه تماس بگیرید یا از پرسش‌های پیشنهادی استفاده کنید.";

    const botMessage: Message = {
      id: (Date.now() + 1).toString(),
      text: botResponse,
      isBot: true,
      timestamp: new Date()
    };

    setIsTyping(false);
    setMessages(prev => [...prev, botMessage]);
  };

  return {
    messages,
    sendMessage,
    isTyping
  };
};